<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance - {{ course_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>DPFinal</h2>
            <button class="close-btn" id="closeSidebar">&times;</button>
        </div>
        <div class="sidebar-content">
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="{{ url_for('dashboard') }}" class="nav-item">
                            <span class="nav-icon">ðŸ“š</span>
                            <span class="nav-text">Courses</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('presence') }}" class="nav-item">
                            <span class="nav-icon">ðŸ“Š</span>
                            <span class="nav-text">Presence</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('manual_checkins') }}" class="nav-item">
                            <span class="nav-icon">âœ…</span>
                            <span class="nav-text">Pending Check-ins</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="sidebar-footer">
            <div class="user-info">
                <p><strong>{{ user.name }}</strong></p>
                <p class="user-email">{{ user.email }}</p>
                <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
            </div>
        </div>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="main-content">
        <header class="top-header">
            <button class="menu-btn" id="menuBtn">
                <span></span><span></span><span></span>
            </button>
            <h1>Attendance - {{ course_name }}</h1>
        </header>

        <div class="content-area">
            <a href="{{ url_for('dashboard') }}" class="back-link">&larr; Back to Courses</a>
            
            <div class="attendance-container">
                <div class="attendance-header">
                    <h2>{{ course_name }} Attendance</h2>
                    <span>Total Records: {{ attendance|length }}</span>
                </div>
                
                {% if attendance %}
                    <table class="attendance-table">
                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Student ID</th>
                                <th>Check-in Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for record in attendance %}
                                <tr>
                                    <td>{{ record[1] }}</td>
                                    <td>{{ record[2] }}</td>
                                    <td>{{ record[3] }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <div class="no-records">
                        <p>No attendance records found for this course.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        // Sidebar toggle handlers
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const closeSidebarBtn = document.getElementById('closeSidebar');
        const menuBtn = document.getElementById('menuBtn');

        menuBtn.addEventListener('click', () => {
            sidebar.classList.add('active');
            sidebarOverlay.classList.add('active');
        });

        closeSidebarBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
        });

        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
        });
    </script>
</body>
</html>